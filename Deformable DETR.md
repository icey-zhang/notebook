目录
一、Deformable Convolution原理分析
Deformable DETR 原理分析
Deformable Attention Module
Multi-scale Deformable Attention Module

一、Deformable Convolution原理分析
**Deformable Convolution** 将固定形状的卷积过程改造成了能适应物体形状的可变的卷积过程，从而使结构适应物体形变的能力更强。

传统的CNN卷积核是**固定大小的，只能在固定为位置对固定输入特征进行采样**， 为了解决这个问题，研究人员提出了两种解决思路：

- **使用大量的数据进行训练。** 比如用ImageNet数据集，再在其基础上做翻转等变化来扩展数据集，通俗地说就是通过穷举的方法使模型能够适应各种形状的物体，这种方法收敛较慢而且要设计复杂的网络结构才能达到理想的结果。
- **设计一些特殊的算法来适应形变.** 比如SIFT，目标检测时用滑动窗口法来适应目标在不同位置上的分类也属于这类。

对第一种方法，如果用训练中**没有遇到过的新形状物体 (但同属于一类)来做测试**，由于新形状没有训练过，会造成测试不准确，而且靠数据集来适应形变的**训练过程太耗时** ，网络结构也必须设计的很复杂。

对于第二种方法，如果**物体的形状极其复杂** ，要设计出能适应这种复杂结构的算法就更困难了。

为解决该问题，研究人员提出了 **Deformable Convolution** 方法，它对感受野上的**每一个点加一个偏移量** ，偏移的大小是通过学习得到的 ，**偏移后感受野不再是个正方形，而是和物体的实际形状相匹配**。这么做的好处就是无论物体怎么形变，**卷积的区域始终覆盖在物体形状的周围。**


下图为Deformable Convolution的示意图，a 为原始感受野范围，b ~ c 是对感受野上的添加偏移量后的感受野范围，可以看到叠加偏移量的过程可以模拟出目标移动、尺寸缩放、旋转等各种形变

